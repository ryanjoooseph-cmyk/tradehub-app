name: triage-open-prs
on:
  schedule: [{ cron: '0 16 * * *' }]  # daily
  workflow_dispatch:

permissions:
  pull-requests: read

jobs:
  report:
    runs-on: ubuntu-latest
    steps:
      - name: List open PRs with state
        run: |
          echo "Open PRs with mergeable_state:"
          gh pr list --state open --limit 200 --json number,title,mergeableState,labels \
            --jq '.[] | [.number, .title, .mergeableState, (.labels|map(.name)|join("|"))] | @tsv'
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
