name: refresh-open-prs
on:
  push:
    branches: [main]
permissions:
  contents: read
  pull-requests: write
jobs:
  refresh:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const {owner, repo} = context.repo
            for await (const response of github.paginate.iterator(github.rest.pulls.list, {owner, repo, state: 'open', per_page: 100})) {
              for (const pr of response.data) {
                try { await github.rest.pulls.updateBranch({owner, repo, pull_number: pr.number}) } catch (e) {}
              }
            }
